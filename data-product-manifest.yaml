version: 0.0.1
discoveryPort:
  name: Maf XConnect Customer Segment
  description: Maf XConnect Customer Segment
  category: audience
  image: http://google.com
  autofillUserinfo: true
  tags: []
  extra: {}
inputPorts:
  - alias: s3_maf_xconnect_crf_customer_segment
    description: XConnect CRF Customer Segment
    tags: []
    extra: {}
    syncType: pull
    type: 's3'
    sourceUrn: urn:dv:datasource:9f98acc2-34bc-417c-bdfb-d1153f54e991
    entityId:
      alias: 's3_maf_xconnect_crf_customer_segment'
      createEntity: true
      entityName: F_CUSTOMER_SEGMENT
      type: 's3-bucket'
      entityPath: "s3://mafh-analytics-data-ingestion/data-ingestion/prd/parsed/rtl_crf_dim_customer_segment/*/F_CUSTOMER_SEGMENT_*.txt"
      filter: ""
      fileFormat: 'csv'
      delimiter: "|"
      header: true
      inferSchema: true
      processingTimeColumn:
        - processing_date
      actualTimeColumn:
        - processing_date
      projection:
        - "*"
stateManagement:
  alias: 'maf_xconnect_crf_customer_segment_segment'
  refreshInterval: 00 10 * * *
  updateStrategy: overwrite
  productStoreState:
    inferSchema: true
    retentionVersions: "10"
  updateStrategyOptions:
      uniqueKeyColumns:
        - crf_customer_segment_hash_id
      changeTrackColumns:
        - nothing
transformation:
  - alias: s3_maf_xconnect_crf_customer_transform
    type: SQL
    description: Fetch data from input table
    query: SELECT * FROM s3_maf_xconnect_crf_customer_segment
    references:
      - alias: s3_maf_xconnect_crf_customer_segment
        sqlReference: s3_maf_xconnect_crf_customer_segment
