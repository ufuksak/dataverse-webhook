---
alias: Test0001_input_port10
version: 0.1.0
discoveryPort:
  name: Weather Forecast10
  shortDescription: Weather Forecast of the next 7 days for ahmedabad city
  longDescription: Weather Forecast of the next 7 days for ahmedabad city along with the accuracy of the previous forecast
  tags: 
    - Weather
    - Forecast
    - City
    - Geospatial
  email: user@maf.ae
  fromMinDataDate: '2022-04-07'
  toMaxDataDate: '2022-04-14'
  lastUpdated: '2022-04-07'
  refreshFrequency: Daily
  industryDomain: Meteorology
  function: Forecast
  regulatoryFields: 
    dataPrivacy: public
    customerInfo: nonPII
    dataOrigin: machineGenerated
    monetaryInfo: nonFinancialData
  qualityInformation: 
    dataAccuracy: 95%
  authorisation-Information:
    organization: MAF, Accenture
    geography:
      type: state
      value: Gujarat
    industryDomain:
      - Meteorology , Weather 
    refreshInterval: Daily
    typeofAuthorisation-InclusionExclusion: Inclusion
  updateStrategy: ''
inputPorts:
  - alias: test_manifest
    description: string
    tags: []
    syncType: pull
    type: s3-csv
    dataSetUrn: urn:dv:dataset:e4d048d1-a491-4192-aaa0-30bb09f1f291
    entity:
      createEntity: true
      entityPath: s3a://mafh-analytics-data-ingestion/data-ingestion/prd/parsed/rtl_crf_dim_account/
      entityFilterPatternMatch: "*"
      datasetSchemaUrn: urn:dv:schema:9d4716d4
      projectSchemaUrn: urn:dv:schema:9d4716d6
      entityVariables:
        - key: timeStamp
          value: date-YYYYMMdd
      incrementalLoad: true
      incrementalStrategy:
        frequency:
          - keyReference: timeStamp
            mode: range
            interval: -5
      fileFormat: csv
      delimiter: "|"
      filter: active_flag=1
      processingTimeColumn:
        - processing_time
      actualTimeColumn: processing_time
      projection:
        - customer_id
        - cust_title_desc
        - cust_birthday
        - cust_nationality
        - cust_email
        - cust_addrs1
        - cust_addrs2
        - cust_addrs3
        - cust_addrs4
        - cust_addrs5
        - cust_city
        - cust_po_box
        - cust_zipcode
        - cust_country
        - cust_landline
        - cust_mobile
        - cust_status_desc
        - cust_gender_desc
        - cust_job
        - cust_call_flag
        - cust_sms_flag
        - cust_mms_flag
        - cust_mail_flag
        - cust_email_flag
        - account_id
        - account_status_key
        - account_inactive_cause_key
        - registration_channel
        - cust_first_name
        - cust_last_name
        - country_key
        - crf_account_hash_id
        - crf_account_hash_scd
        - processing_time
        - file_name 
transformation:
  - alias: Transform1
    type: SQL
    sequenceNo: '1'
    description: Join input1 and input2 to get the actual member name
    query: select * from i1 inner join i2 on i1.id=i2.id
  - alias: Transform2
    type: SQL
    sequenceNo: '2'
    description: Generate the sum of marks on a name level
    query: select name,sum(marks) from t1 group by name
controlPort:
  dataQualityRules:
    SomeCheck:
      productState:
        number: 1
        expression: "<="
  businessMetrics: {}
  slo: {}
  tags: []
outputPort:
  subscriptionChannels:
    - channelType: REST-API
      queryType: SQL
    - channelType: JDBC
      queryType: SQL
productState:
  alias: string
  refreshInterval: 0/15 * * * *
  updateStrategy: append
  updateStrategyOptions:
    entityRef: "${urn:dv:dataset:6d4714c3}:1"
    processingTimeColumn:
      - '2022-11-20T12:13:01.150Z'
    actualTimeColumn: '2022-11-20T12:13:01.150Z'
    uniqueKeyColumns:
      - string
    changeTrackColumns:
      - string
    tags:
      - string
  logicalSchema:
    properties:
      brand:
        type: string
      model:
        type: string
      engine:
        type: string
      year:
        type: string
      location:
        type: string
  encodingType: HASH
  columnsToEncode: []
